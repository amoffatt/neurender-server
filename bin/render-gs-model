#!/usr/bin/python3

import os
import argparse
from subprocess import run

INSTALL_PATH=os.path.expanduser('~/neurender/tools/nerfstudio-gaussian-splatting-fork')

def main():
    parser = argparse.ArgumentParser(description='Render Gaussian Splatting scene with NerfStudio')
    parser.add_argument('--model', type=str, help='model folder')
    parser.add_argument('--camera-path', type=str, help='camera path file from NerfStudio')
    parser.add_argument('--output', type=str, help='output video path')
    parser.add_argument('--format', type=str, help='output format', default='video', choices=['video', 'images'])

    args = parser.parse_args()

    run([
        'python3',
        os.path.join(INSTALL_PATH, 'nerfstudio/scripts/gaussian_splatting/render.py'),
        'camera-path',
        '--model-path', args.model,
        '--camera-path-filename', args.camera_path,
        '--output-path', args.output
    ])

if __name__== "__main__":
    main()
